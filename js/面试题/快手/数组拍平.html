<script>
  // 递归
  let a = [1, 2, 3, [4, [5, [6]]]]
  function flat(arr, deep) {
    let res = []
    function walk(myarr, num) {
      for (let i = 0; i < myarr.length; i++) {
        if (Array.isArray(myarr[i]) && num < deep) {
          walk(myarr[i], num+1)
        } else {
          res.push(myarr[i])
        }
      }
    }
    walk(arr, 0)
    return res
  }
  console.log(flat(a, 2));

  // 栈
  function flat1(a) {
    let stack = [...a], res = [];
    while (stack.length) {
      let item = stack.pop()
      if (Array.isArray(item)) {
        stack.push(...item)
      } else {
        res.unshift(item)
      }
    }
    return res
  }
</script>